<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
   <meta name="viewport" content="width=device-width,height=device-height,initial-scale=0.5, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes" />
  <title>代理管理平台</title>
  <script language="javascript" src="/JSON.js"></script>
  <script language="javascript" src="/JSONError.js"></script>
  <script language="javascript" src="/JSONRequestError.js"></script>
  <script language="javascript" src="/JSONRequest.js"></script>

</head>
<body>
<style type="text/css">
  a:hover{
    color:red;
	text-decoration:none
  }
   #div1{
	width:100%;
	height:100%;
	border:1px solid #000;
	margin:auto auto auto auto;
  }
  #div2{
	clear:both;
	width:100%;
	height:80px;
	border:1px solid #000;border-top:none;border-left:none;border-right:none;

  }
  #table1{border-collapse:collapse;border-left:none;border-right:none;}
  #table2{border-collapse:collapse;border-left:none;border-right:none;border-bottom:none;}
  #table3{border-collapse:collapse;border-left:none;border-right:none;}

  input{width: 160px;}
</style>
<div style="margin-top: 1px" id="div1" >
    <div id="div2"><h1 style="text-align:center">三袁互娱代理平台欢迎XXX代理登入使用</h1></div>
	<div><h2 style="text-align:center">代理提示信息</h2></div>
	<div id="div3">
       <table border="1" width="100%" align="center" id="table3" >
			<tr><td><a id='proxy'>我的代理</a></td>
			<td><a id='member' >我的会员</a></td>
			<td><a id='detail' >充值明细</a></td>
			<td>点击前面3个选项可以跳转到所属界面</td></tr>
	   </table>
    </div>
	<div id="div4"><h2 style="text-align:center">代理基本信息</h2></div>
	<div id="div5">
       <table border="1"  width="100%" id="table1" align="center" >
			<tr><td align="right" >游戏账号ID：</td><td><input id="game_id" readonly="readonly"  type="text"/></td>
			<td align="right">游戏账号昵称：</td><td><input readonly="readonly"  type="text"/></td>
			<td align="right">真实姓名：</td><td><input id="name" readonly="readonly"  type="text"/></td>
			</tr>
			<tr><td align="right">手机号：</td><td><input id="mobile"  readonly="readonly"  type="text"/></td>
			<td align="right">微信号：</td><td><input id="wechat" readonly="readonly"  type="text"/></td>
			<td align="right">元宝：</td><td><input readonly="readonly"  type="text"/></td>
			</tr>
			<tr><td align="right">邀请码：</td><td><input readonly="readonly"  type="text"/></td>
			<td align="right">代理级别：</td><td><input id="agent_lv" readonly="readonly"  type="text"/></td>
			<td align="right">会员数：</td><td><input readonly="readonly" id="player_count" type="text"/></td>
			</tr>
			<tr><td align="right">注册代理时间：</td><td><input readonly="readonly"  type="text"/></td>
			<td align="right">上级代理邀请码：</td><td><input readonly="readonly"  type="text"/></td>
			<td align="right">上级代理昵称：</td><td><input readonly="readonly"  type="text"/></td>
			</tr>
			<tr><td align="right">最近登录时间：</td><td><input readonly="readonly"  type="text"/></td>
				<td align="right">最近登录IP：</td><td><input readonly="readonly"  type="text"/></td>
				<td align="right">代理状态：</td><td><input readonly="readonly"  type="text"/></td>
			</tr>
			<tr><td align="right">身份证：</td><td><input id="identity"  readonly="readonly"  type="text"/></td>
				<td align="right">代理号：</td><td><input id="key" readonly="readonly"  type="text"/></td>
				<td align="right">上级代理号：</td><td><input id="ower_key" readonly="readonly"  type="text"/></td>
			</tr>
			<tr><td align="right">上级代等级：</td><td><input readonly="readonly"  type="text"/></td>
				<td align="right">密码：</td><td><input readonly="readonly"  type="text"/></td>
				<td align="right">地址：</td><td><input readonly="readonly"  type="textarea"/></td>
			</tr>
	   </table>
    </div>
	<div id="div6"><h2 style="text-align:center">收入明细</h2></div>
	<div id="div7">
       <table border="1" width="100%" align="center" id="table2" >
			<tr><td align="right">直接收入：</td><td><input readonly="readonly"  type="text"/></td>
			<td align="right">提成收入：</td><td><input readonly="readonly"  type="text"/></td>
			</tr>
			<tr><td align="right">总收入：</td><td><input readonly="readonly"  type="text"/></td>
			<td align="right">可提取金额：</td><td><input readonly="readonly"  type="text"/></td>
			</tr>
			<tr><td align="right">取款金额：</td><td><input readonly="readonly"  type="text"/></td>
				<td align="right">玩家付费：</td><td><input id="player_total_fee" readonly="readonly"  type="text"/></td>
			</tr>
			<tr>
				<td align="right">下级代理玩家付费：</td><td><input id="child_total_fee" readonly="readonly"  type="text"/></td>
				<td align="right">收入：</td><td><input id="sum_total_fee" readonly="readonly"  type="text"/></td>
			</tr>
			<tr>
				<td align="right">微信提现金额：</td><td><input id="amount" type="text"/>
				<button style="width:80px; height:30px;" onclick="qukuan()">微信取款</button></td>
			</tr>

	   </table>
    </div>
</div>

<script type="text/javascript">
		 function GetRequest() {
		    var url = top.window.location.href;
		    var theRequest = new Object();
		    if (url.indexOf("?") != -1) {
		        var str = url.substr(url.indexOf("?") + 1);
		        strs = str.split("&");
		        for(var i = 0; i < strs.length; i ++) {
		           theRequest[strs[i].split("=")[0]]=(strs[i].split("=")[1]);
		        }
		    }
		    return theRequest;
		}

		var req = GetRequest();
		var sid = req["sid"];
		var params = {"sid":sid};
		JSONRequest.post("/agent/base_info", params, function (requestNumber, value, exception){
			if (value["error"])
			{
				alert(value["error"]);
			}
			else
			{
				document.getElementById("game_id").value=value["game_id"];
				document.getElementById("name").value=value["name"];
				document.getElementById("mobile").value=value["mobile"];
				document.getElementById("wechat").value=value["wechat"];
				document.getElementById("agent_lv").value=value["agent_lv"];
				document.getElementById("identity").value=value["identity"];
				document.getElementById("ower_key").value=value["ower_key"];
				document.getElementById("key").value=value["key"];
				document.getElementById("player_total_fee").value=value["player_total_fee"];
				document.getElementById("child_total_fee").value=value["child_total_fee"];
				document.getElementById("sum_total_fee").value=value["sum_total_fee"];
			}

		});


		function qukuan(){
			var amount=document.getElementById("amount").value;
			var params={"sid":sid,"amount":amount};
			if(confirm("您要提现的金额是人民币:"+amount+"元")){
				JSONRequest.post("/agent/cash_out", params, function (requestNumber, value, exception){
					if (value["error"])
					{
						alert(value["error"]);
					}
					else
					{
						alert(value["ret"]);
					}
				});
			}
		}


	document.getElementById('proxy').href="/agent/manage_info?sid=" + sid + "&operation=proxy";
	document.getElementById('member').href="/agent/manage_info?sid=" + sid + "&operation=member";
	document.getElementById('detail').href="/agent/manage_info?sid=" + sid + "&operation=detail";

</script>
</body>
</html>
